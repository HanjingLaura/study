---
title: "Flutter"
date: 2026-01-19
draft: false
---

# Flutter
## Flutter项目
- Flutter项目
    - 创建Flutter项目
        - flutter create --platforms web <项目名称>
    - 运行Flutter项目
        - lib/main.dart
        - 点击Run
    - Flutter项目目录
        - 解析工程目录结构
            - .开头的文件：多为编译器/工具自动生成
            - lib：项目的主要源代码目录
                - main.dart：应用程序入口点
            - test：测试文件目录
            - web：Web平台特定的配置和资源文件
            - pubspec.yaml：项目依赖和配置文件
            - build：构建产物目录
    - 启动文件说明
        - runApp函数是Flutter内部提供的一个函数，启动一个Flutter应用就是从调用这个函数开始的
        - runApp(const MyApp())
            - const MyApp() —— Widget
            - Widget：部件，组件，部件
            - Flutter中万物皆Widget
        - Flutter默认Material库
            - Google公式推行的设计风格，包括设计规范如颜色，文字排版，动画等等
            - 为多平台提供同意的交互和视觉体验
- 基础组件
    - MaterialApp
        - 特性：整个应用被MaterialApp包裹，方便我们对整个应用的属性进行整体设计
        - 常见属性
            - title：用来展示窗口的标签内容
            - theme：用来设置整个应用的主题
            - home：用来展示窗口的主体内容
    - Scaffold
        - 构件Material Design风格页面的核心布局组件，提供标准，灵活配置的页面骨架
        - 属性
            - appBar：顶部应用栏
            - body：主要内容区域
            - bottomNavigationBar：底部导航栏
            - backgroundColor：整个Scaffold的背景颜色
            - floatingActionButton：悬浮操作按钮
    - 自定义组件
        - 根据自己特定需求创建自己的Widget
        - 无状态组件
            - StatelessWidget
                - 定义：创建一个新的类，继承StatelessWidget类并实现build方法
                - 要点：build返回一个Widget 
            - 特征：一旦创建内部状态不可变
            - 场景：静态内容展示，外观仅由配置参数决定
            - 生命周期：主要是build
            - 代码结构：单个类
        - 有状态组件
            - StatefulWidget
                - 定义：有状态组件是构建动态交互界面的核心，能够管理变化的内部状态，当状态改变时组件会更新显示内容
                - 实现
                    - 创建两个类
                    - 一个类继承StatefulWidget，主要接收和定义最终参数，核心作用时创建State对象
                    - 而第二个继承State<第一个类名>，负责管理所有可变的数据和业务逻辑，并实现build构建方法
                - 要点：build方法需要返回一个Widget
            - 特征：持有可在其生命周期内改变的状态
            - 场景：交互式组件
            - 生命周期：更复杂，含状态创建，更新，销毁
            - 代码结构：两个关联的类：Widget本身和单独的State类
        - 快速创建组件
            - 无状态组件快捷键：statelessW
            - 有状态组件快捷键：statefulW
        - 组件生命周期
            - 无状态组件
                - 唯一阶段：build方法
                - 当组件被创建或父组件状态变化导致其需要重新构建时，build方法会被调用
            - 有状态组件
                - 创建阶段
                    - StatefulWidget被创建
                    - createState：createState()
                        - Widget初始化调用，创建State对象
                    - State对象创建
                    - initState：initState()
                        - State对象插入Widget树立刻执行，仅执行一次
                    - didChangeDependencles：didChangeDependencles()
                        - initState后立刻执行，当所依赖的InheritedWidget更新时调用，可能多次
                    - build()
                        - 构建UI方法，初始化或更新后多次调用
                - 更新阶段
                    - 父组件重建，配置更改
                    - didUpdateWidget：didUpdateWidget()
                        - 父组件传入新配置时调用，用于比较新旧配置
                        - didUpdateWidget->build
                    - build()
                        - 构建UI方法，初始化或更新后多次调用
                - 销毁阶段
                    - 组件被移除
                    - deactivate：deactivate()
                        - 当State对象从树中暂时移除时调用
                    - dispose：dispose()
                        - 当State对象被永久移出时调用，释放资源，仅执行一次
        - 事件
            - 点击事件
                - GestureDetector
                - 事件：用户与应用程序交互时触发的各种动作
                - 点击事件：点击某个元素触发的动作
                - 常规方案：GestureDetector是flutter中最常用，功能最丰富的手势检测组件
                - 常用方法
                    - onTab：单击事件
                    - onDoubleTab：双击事件
                - 用法：使用GestureDetector包裹被点击的元素，传入方法
            - 组件点击事件
                - 组件：flutter提供了多种方式为组件添加点击交互
                - 分类
                    - 专用按钮组件：内置点击动画和样式，通过onPressed参数处理点击逻辑
                        - ElevatedButton
                        - TextButton
                        - OutlineButton
                        - FloatingActionButton
                    - 视觉反馈组件：提供点击事件（onTap），又MaterialDesign风格的水纹扩散效果
                        - InkWell
                    - 其他交互组件
                        - 具有特定功能的交互式控件，点击事件（onPressed）
                        - IconButton
                        - Switch
                        - Checkbox